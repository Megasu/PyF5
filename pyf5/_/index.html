<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F5</title>
    <link rel="icon" type="image/x-icon" href="/_/img/favicon.ico"/>

    <link href="/_/css/bootstrap.min.css" rel="stylesheet">
    <link href="/_/css/index.css" type="text/css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/_/js/libs/html5shiv.js"></script>
    <script src="/_/js/libs/respond.min.js"></script>
    <![endif]-->
</head>
<body ng-controller="IndexController">

<div id="body" class="container">
    <div class="row">

        <div class="col-sm-4 projects-box">
            <div class="page-header">
                <h3>项目列表</h3>
            </div>

            <form class="add-project" ng-submit="addProject(newProject.path)">
                <div class="input-group">
                    <input class="form-control" id="new-path-input" type="text"
                           ng-model="newProject.path"
                           placeholder="请输入项目所在目录...">
                    <span class="input-group-btn">
                        <button class="btn btn-success" type="submit">添加</button>
                    </span>
                </div>
            </form>

            <div class="list-group">
                <project model="project" ng-repeat="project in projects"></project>
            </div>
        </div>

        <div class="files-box col-sm-5" ng-controller="FilesController">
            <div class="page-header">
                <h3>文件列表</h3>
            </div>

            <ol class="breadcrumb">
                <li>
                    <a href="" ng-click="setRelativePath('')">
                        <i class="glyphicon glyphicon-home"></i>
                    </a>
                </li>
                <li ng-repeat="level in levels" ng-class="{'active': $last}">
                    <a ng-if="!$last" href="" ng-click="setRelativePath(level.relativePath)">{{ level.name }}</a>
                    <span ng-if="$last">{{ level.name }}</span>
                </li>
            </ol>

            <table class="table table-hover">
                <tbody>
                <tr ng-repeat="item in list">
                    <td class="file" ng-class="item.type" ng-click="click(item)">
                        <i class="icon"></i>
                        {{ item.name }}
                    </td>
                    <td class="op"></td>
                </tr>
                </tbody>
            </table>
        </div>

        <div class="settings-box col-sm-3" ng-controller="SettingsController" ng-show="project">

            <div class="type-setting">
                <div class="page-header">
                    <h5>项目类型</h5>
                </div>

                <div class="btn-group btn-group-justified btn-group-sm"
                     ng-model="project.mode" ng-cloak>
                    <a href="" class="btn btn-default"
                       ng-class="{active: project.mode!='dynamic'}"
                       ng-mouseover="setHoveringMode('static')"
                       ng-mouseleave="setHoveringMode(null)"
                       ng-click="switchMode('static')">
                        <i class="glyphicon glyphicon-ok text-primary"></i>
                        静态项目
                    </a>
                    <a href="" class="btn btn-default"
                       ng-class="{active: project.mode=='dynamic'}"
                       ng-mouseover="setHoveringMode('dynamic')"
                       ng-mouseleave="setHoveringMode(null)"
                       ng-click="switchMode('dynamic')">
                        <i class="glyphicon glyphicon-ok text-primary"></i>
                        动态项目
                    </a>
                </div>
                <div ng-if="project.mode == 'dynamic'" class="alert alert-info">
                    <i class="glyphicon glyphicon-arrow-right"></i>
                    <a href="http://{{project.host}}:{{f5Port}}" target="_blank" class="alert-link">
                        {{ project.host }} : {{ project.port || 80 }}
                    </a>

                    <a href="" ng-click="promptHostPort()" class="glyphicon glyphicon-cog pull-right"></a>
                </div>
                <span class="help-block">
                    <span ng-if="hoveringMode=='static'">只使用HTML/CSS/JS的纯静态项目</span>
                    <span ng-if="hoveringMode=='dynamic'">使用了PHP/ASP/ROR等服务器技术的项目</span>
                </span>
            </div>

            <div>
                <div class="page-header">
                    <h5>编译设置</h5>
                </div>

                <div class="form-group">
                    <div class="checkbox">
                        <label>
                            <input type="checkbox"> 自动编译 .less 文件
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <div class="checkbox">
                        <label>
                            <input type="checkbox"> 自动编译 .coffee 文件
                        </label>
                    </div>
                </div>
            </div>

            <div>
                <div class="page-header">
                    <h5>刷新设置</h5>
                </div>

                <select class="form-control input-sm"
                        ng-model="model.delayOption"
                        ng-options="option.name for option in delayOptions">
                    <option value="">立即刷新（不延迟）</option>
                </select>
            </div>


        </div>
    </div>
</div>

<div id="qrcode-modal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h3 class="modal-title">二维码URL</h3>
            </div>

            <div class="modal-body" data-bind="with:activeProject">
                <div id="hosts">
                    <div class="input-group">
                        <span class="input-group-addon">域名</span>
                        <input class="form-control" data-bind="value:QRhost, valueUpdate:'keyup'">
                    </div>
                </div>
                <div class="clearfix"></div>

                <!-- ko with: QRCodeFile -->
                <input id="qrurl-input" name="url" class="form-control" type="text"
                       data-bind="value:QRurl, event:{keyup: $parent.QRUrlChange, change: $parent.QRUrlChange}">
                <!-- /ko -->

                <div id="qrcode"></div>
            </div>

            <div class="modal-footer">
                <a href="javascript:" data-dismiss="modal" class="btn btn-primary">关闭</a>
            </div>

        </div>
    </div>
</div>


<script src="/_/js/libs/require.js"
        data-main="/_/js/index.js"></script>
</body>
</html>